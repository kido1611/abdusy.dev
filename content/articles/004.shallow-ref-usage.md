---
title: "shallowRef"
description: "Penggunaan antara ref dan shallowRef"
author: "Muhammad Abdusy Syukur"
created_at: "2024-02-04 20:09:00"
---

`shallowRef` memiliki behavior yang sama dengan `ref`, hanya saja dia memiliki perbedaan di bagian reactivity-nya. Jika `ref` akan men-trigger reactivity jika sebagian / semua isi berubah, sedangkan `shallowRef` akan men-trigger jika semua isi berubah.

Salah satu benefit dari penggunaan `shallowRef` adalah disisi performa.

## Penggunaan

`shallowRef` akan efektif data berisi object atau class (berisi banyak nilai). Jika berisi 1 nilai, maka `shallowRef` tidak ada bedanya dengan `ref` biasa.

`shallowRef` digunakan pada beberapa fungsi / composable ini :

1. useFetch - @vueuse
2. useAsyncData - nuxt

Dari contoh diatas, dapat disimpulkan `shallowRef` dapat digunakan untuk meng-handle suatu response.

## Contoh

[shallowRef Example](/examples/shallow-ref)

### Do

```vue
<script setup lang="ts">
const counter = ref(0);

function increment() {
  counter.value++;
}
</script>

<template>
  <div>
    <p>Count: {{ counter }}</p>
    <button type="button" @click="increment">Increase Count</button>
  </div>
</template>
```

### Don't

```vue
<script setup lang="ts">
const counter = shallowRef(0);

function increment() {
  counter.value++;
}
</script>

<template>
  <div>
    <p>Count: {{ counter }}</p>
    <button type="button" @click="increment">Increase Count</button>
  </div>
</template>
```

### Don't

```vue
<script setup lang="ts">
const counter = ref({ count: 0 });

function increment() {
  counter.value.count++;
}
</script>

<template>
  <div>
    <p>Count: {{ counter }}</p>
    <button type="button" @click="increment">Increase Count</button>
  </div>
</template>
```

### Do (But won't update the view)

```vue
<script setup lang="ts">
const counter = shallowRef({ count: 0 });

function increment() {
  counter.value.count++;
}
</script>

<template>
  <div>
    <p>Count: {{ counter }}</p>
    <button type="button" @click="increment">Increase Count</button>
  </div>
</template>
```

### Do (Fix)

```vue
<script setup lang="ts">
const counter = shallowRef({ count: 0 });

function increment() {
  counter.value.count++;
  triggerRef(counter);
}
</script>

<template>
  <div>
    <p>Count: {{ counter }}</p>
    <button type="button" @click="increment">Increase Count</button>
  </div>
</template>
```
